{"ast":null,"code":"var _jsxFileName = \"/home/rethick/Documents/react/simple-social-media/src/ImageUpload.js\";\nimport { Button } from '@material-ui/core';\nimport React, { useState } from 'react';\nimport { storage, db } from './firebase';\nimport firebase from \"firebase\";\nimport './ImageUpload.css';\n\nfunction ImageUpload({\n  username\n}) {\n  const [caption, setCaption] = useState('');\n  const [progress, setProgress] = useState(0);\n  const [image, setImage] = useState(null);\n\n  const handleChange = e => {\n    if (e.target.files[0]) {\n      setImage(e.target.files[0]);\n    }\n  };\n\n  const handleUpload = () => {\n    const uploadTask = storage.ref(`images/${image.name}`).put(image);\n    uploadTask.on(\"state_changed\", snapshot => {\n      //progress Function\n      const progress = Math.round(snapshot.bytesTransferred / snapshot.totalBytes * 100);\n      setProgress(progress);\n    }, error => {\n      //error function\n      console.log(error);\n      alert(error.message);\n    }, () => {\n      //complete function\n      storage.ref(\"images\").child(image.name).getDownloadURL().then(url => {\n        db.collection(\"posts\").add({\n          timestamp: firebase.firestore.FieldValue.serverTimestamp(),\n          caption: caption,\n          imageurl: url,\n          username: username\n        });\n        setProgress(0);\n        setCaption(\"\");\n        setImage(null);\n      });\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"imageupload\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"progress\", {\n    className: \"imageupload_progress\",\n    value: progress,\n    max: \"100\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    placeholder: \"Enter the caption\",\n    onChange: event => setCaption(event.target.value),\n    value: caption,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"file\",\n    onChange: handleChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(Button, {\n    onClick: handleUpload,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 13\n    }\n  }, \"Upload\")));\n}\n\nexport default ImageUpload;","map":{"version":3,"sources":["/home/rethick/Documents/react/simple-social-media/src/ImageUpload.js"],"names":["Button","React","useState","storage","db","firebase","ImageUpload","username","caption","setCaption","progress","setProgress","image","setImage","handleChange","e","target","files","handleUpload","uploadTask","ref","name","put","on","snapshot","Math","round","bytesTransferred","totalBytes","error","console","log","alert","message","child","getDownloadURL","then","url","collection","add","timestamp","firestore","FieldValue","serverTimestamp","imageurl","event","value"],"mappings":"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","sourcesContent":["import { Button } from '@material-ui/core'\nimport React, {useState} from 'react'\nimport {storage,db} from './firebase';\nimport firebase from  \"firebase\";\nimport './ImageUpload.css';\n \n\nfunction ImageUpload({username}) {\n   \n    const [caption,setCaption]=useState('');\n    const [progress,setProgress]=useState(0);\n    const [image,setImage]=useState(null);\n\n   \n   const handleChange=(e)=>{\n        if(e.target.files[0]){\n            setImage(e.target.files[0]);\n        }\n\n   }\n   \n   \n   const handleUpload = ()=> {\n      \n    const uploadTask = storage.ref(`images/${image.name}`).put(image);\n\n    uploadTask.on(\n\n        \"state_changed\",\n        (snapshot)=>{\n                //progress Function\n                const progress = Math.round(\n                    (snapshot.bytesTransferred/snapshot.totalBytes)*100\n                );\n                setProgress(progress);\n\n        },\n        (error)=>{\n            //error function\n            console.log(error);\n            alert(error.message);\n        },\n        ()=>{\n            //complete function\n            storage\n                .ref(\"images\")\n                .child(image.name)\n                .getDownloadURL()\n                .then( url => {\n\n                        db.collection(\"posts\").add({\n                           timestamp: firebase.firestore.FieldValue.serverTimestamp(),     \n                            caption:caption,\n                            imageurl:url,\n                            username:username\n                       \n                        });\n\n                        setProgress(0);\n                        setCaption(\"\");\n                        setImage(null);\n                \n                })\n\n        }\n\n    )\n\n   }\n\n\n    return (\n        <div className=\"imageupload\">\n        \n        <progress className=\"imageupload_progress\" value={progress} max=\"100\" />\n        <input type=\"text\" placeholder=\"Enter the caption\" onChange={event=> setCaption(event.target.value)}  value={caption}/>\n        <input type=\"file\" onChange={handleChange} />\n        <Button onClick={handleUpload}>\n            <strong>Upload</strong>\n        </Button>\n        \n        \n        \n        \n        </div>\n    )\n}\n\nexport default ImageUpload\n"]},"metadata":{},"sourceType":"module"}