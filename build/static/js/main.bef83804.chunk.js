(this.webpackJsonpinstagram_clone=this.webpackJsonpinstagram_clone||[]).push([[0],{49:function(e,t,a){e.exports=a(76)},54:function(e,t,a){},55:function(e,t,a){},70:function(e,t,a){},71:function(e,t,a){},76:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(13),o=a.n(c),s=(a(54),a(9)),l=a(32),i=a.n(l),u=(a(55),a(102)),m=a(18),p=a.n(m),d=p.a.initializeApp({apiKey:"AIzaSyCzGx0bCSZFwhJjxVSpeRxm9aCUh-BEsdw",authDomain:"instagram-clone-one.firebaseapp.com",databaseURL:"https://instagram-clone-one.firebaseio.com",projectId:"instagram-clone-one",storageBucket:"instagram-clone-one.appspot.com",messagingSenderId:"899318828116",appId:"1:899318828116:web:84101e51fea306b9c231c1",measurementId:"G-MYMNYWMPPX"}).firestore(),f=p.a.auth(),g=p.a.storage(),E=function(e){var t=e.postId,a=e.user,c=e.username,o=e.caption,l=e.imageurl,i=Object(n.useState)([]),m=Object(s.a)(i,2),f=m[0],g=m[1],E=Object(n.useState)(""),h=Object(s.a)(E,2),v=h[0],b=h[1];Object(n.useEffect)((function(){var e;return t&&(e=d.collection("posts").doc(t).collection("comments").orderBy("timestamp","desc").onSnapshot((function(e){g(e.docs.map((function(e){return e.data()})))}))),function(){e()}}),[t]);return r.a.createElement("div",{className:"posts"},r.a.createElement("div",{className:"posts_header"},r.a.createElement(u.a,{className:"posts_avatar",alt:c,src:"/static/images/avatar/1.jpg"}),r.a.createElement("h3",null,c)),r.a.createElement("img",{className:"posts__image",src:l}),r.a.createElement("h4",{className:"posts_text"},r.a.createElement("strong",null,c),": ",o," "),r.a.createElement("div",{className:"post__comments"},f.map((function(e){return r.a.createElement("p",null,r.a.createElement("strong",null,e.username),e.text)}))),a&&r.a.createElement("form",{className:"post__commentBox"},r.a.createElement("input",{className:"post__input",type:"text",placeholder:"add comment",value:v,onChange:function(e){return b(e.target.value)}}),r.a.createElement("button",{className:"post__button",disabled:!v,type:"submit",onClick:function(e){e.preventDefault(),d.collection("posts").doc(t).collection("comments").add({text:v,username:a.displayName,timestamp:p.a.firestore.FieldValue.serverTimestamp()}),b("")}},"Post")))},h=(a(70),a(99)),v=a(98),b=a(101),j=a(100);a(71);var N=function(e){var t=e.username,a=Object(n.useState)(""),c=Object(s.a)(a,2),o=c[0],l=c[1],i=Object(n.useState)(0),u=Object(s.a)(i,2),m=u[0],f=u[1],E=Object(n.useState)(null),h=Object(s.a)(E,2),v=h[0],b=h[1];return r.a.createElement("div",{className:"imageupload"},r.a.createElement("progress",{className:"imageupload_progress",value:m,max:"100"}),r.a.createElement("input",{type:"text",placeholder:"Enter the caption",onChange:function(e){return l(e.target.value)},value:o}),r.a.createElement("input",{type:"file",onChange:function(e){e.target.files[0]&&b(e.target.files[0])}}),r.a.createElement(j.a,{onClick:function(){g.ref("images/".concat(v.name)).put(v).on("state_changed",(function(e){var t=Math.round(e.bytesTransferred/e.totalBytes*100);f(t)}),(function(e){console.log(e),alert(e.message)}),(function(){g.ref("images").child(v.name).getDownloadURL().then((function(e){d.collection("posts").add({timestamp:p.a.firestore.FieldValue.serverTimestamp(),caption:o,imageurl:e,username:t}),f(0),l(""),b(null)}))}))}},"Upload"))},O=a(44);function S(){return{top:"".concat(50,"%"),left:"".concat(50,"%"),transform:"translate(-".concat(50,"%, -").concat(50,"%)")}}var _=Object(v.a)((function(e){return{paper:{position:"absolute",width:400,backgroundColor:e.palette.background.paper,border:"2px solid #000",boxShadow:e.shadows[5],padding:e.spacing(2,4,3)}}}));var y=function(){var e=Object(n.useState)([]),t=Object(s.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)(!1),l=Object(s.a)(o,2),u=l[0],m=l[1],p=_(),g=r.a.useState(S),v=Object(s.a)(g,1)[0],y=Object(n.useState)(""),C=Object(s.a)(y,2),w=C[0],x=C[1],k=Object(n.useState)(""),I=Object(s.a)(k,2),B=I[0],A=I[1],U=Object(n.useState)(""),z=Object(s.a)(U,2),P=z[0],W=z[1],D=Object(n.useState)(null),L=Object(s.a)(D,2),M=L[0],R=L[1],F=Object(n.useState)(!1),T=Object(s.a)(F,2),J=T[0],V=T[1];return Object(n.useEffect)((function(){var e=f.onAuthStateChanged((function(e){e?(console.log(e),R(e)):R(null)}));return function(){e()}}),[M,B]),Object(n.useEffect)((function(){d.collection("posts").orderBy("timestamp","desc").onSnapshot((function(e){return c(e.docs.map((function(e){return{id:e.id,posts:e.data()}})))}))}),[]),r.a.createElement("div",{className:"App"},r.a.createElement(h.a,{open:u,onClose:function(){return m(!1)}},r.a.createElement("div",{style:v,className:p.paper},r.a.createElement("form",{className:"app_signup"},r.a.createElement("center",null,r.a.createElement("div",{className:"app_headerImage"},r.a.createElement(i.a,{fontSize:"large"}))),r.a.createElement(b.a,{placeholder:"username",type:"text",value:B,onChange:function(e){return A(e.target.value)}}),r.a.createElement(b.a,{placeholder:"email",type:"text",value:w,onChange:function(e){return x(e.target.value)}}),r.a.createElement(b.a,{placeholder:"password",type:"password",value:P,onChange:function(e){return W(e.target.value)}}),r.a.createElement(j.a,{type:"submit",onClick:function(e){e.preventDefault(),f.createUserWithEmailAndPassword(w,P).then((function(e){return e.user.updateProfile({displayName:B})})).catch((function(e){return alert(e.message)})),m(!1)}}," sign Up")))),r.a.createElement(h.a,{open:J,onClose:function(){return V(!1)}},r.a.createElement("div",{style:v,className:p.paper},r.a.createElement("form",{className:"app_signup"},r.a.createElement("center",null,r.a.createElement("div",{className:"app_headerImage"},r.a.createElement(i.a,{fontSize:"large"}))),r.a.createElement(b.a,{placeholder:"email",type:"text",value:w,onChange:function(e){return x(e.target.value)}}),r.a.createElement(b.a,{placeholder:"password",type:"password",value:P,onChange:function(e){return W(e.target.value)}}),r.a.createElement(j.a,{type:"submit",onClick:function(e){e.preventDefault(),f.signInWithEmailAndPassword(w,P).catch((function(e){return alert(e.message)})),V(!1)}}," sign In")))),r.a.createElement("div",{className:"app_header"},r.a.createElement("div",{className:"app_headerImage"},r.a.createElement(i.a,{fontSize:"large"})),M?r.a.createElement(j.a,{onClick:function(){return f.signOut()}},"Logout"):r.a.createElement("div",{className:"app_loginContainer"},r.a.createElement(j.a,{onClick:function(){return V(!0)}},"Sign In"),r.a.createElement(j.a,{onClick:function(){return m(!0)}},"Sign Up"))),r.a.createElement("div",{className:"app__posts"},r.a.createElement("div",{className:"app__postsLeft"},a.map((function(e){var t=e.id,a=e.posts;return r.a.createElement(E,{key:t,postId:t,user:M,username:a.username,caption:a.caption,imageurl:a.imageurl})}))),r.a.createElement("div",{className:"app__postsRight"},r.a.createElement(O.a,{url:"https://instagr.am/p/Zw9o4/",maxWidth:320,hideCaption:!1,containerTagName:"div",protocol:"",injectScript:!0,onLoading:function(){},onSuccess:function(){},onAfterRender:function(){},onFailure:function(){}}))),(null===M||void 0===M?void 0:M.displayName)?r.a.createElement(N,{username:M.displayName}):r.a.createElement("h3",null,"Sorry you need to login"))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(y,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[49,1,2]]]);
//# sourceMappingURL=main.bef83804.chunk.js.map